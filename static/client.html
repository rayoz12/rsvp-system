<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ryan & Manjusha</title>
    <link rel="stylesheet" href="res/normalise.css" type="text/css">
    <link rel="stylesheet" href="res/sakura-earthly.css" type="text/css">
    <link rel="stylesheet" href="res/styles.css" type="text/css">    
</head>

<body>
    <h1 class="names">Ryan & Manjusha</h1>

    {{#if notification}}
    <div class="flex flex-row align-center" style="width: 100%; height: 50px;">
        <div style="height: 100%; width: 50px; text-align: center; background-color: #1d8348;">
            <svg style="height: 100%; fill: white" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="000000" d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>
        </div>
        <div class="flex-grow flex align-center" style="height: 100%; background-color: #27ae60; vertical-align: center; padding-left: 10px; color: white;">
            {{notification}}
        </div>
    </div>
    {{/if}}

    {{#if error}}
    <div class="flex flex-row align-center" style="width: 100%; height: 50px;">
        <div style="height: 100%; width: 50px; text-align: center; background-color: #ffe1e3">
            <svg style="height: 100%; fill: white" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="000000" d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>
        </div>
        <div class="flex-grow flex align-center" style="height: 100%; background-color: #fa9ba3; vertical-align: center; padding-left: 10px; color: white;">
            {{error}}
        </div>
    </div>
    {{/if}}

    <form method="post" action="invitee-response" enctype="application/x-www-form-urlencoded" target="_self">

        <input hidden type="text" name="token" value="{{token}}" />

        <h2>Hello {{name}}</h2>
        <p class="question">We would love to invite you to our Nuptials & Reception on the 24th of November</p>

        <h2 class="decorated"><span>Nuptials</span></h2>
        <p class="question">The Good Shepherd Parish Plumpton: 136 Hyatts Rd, Plumpton</p>
        <div style="width: 100%;">
            <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d13270.02828291248!2d150.8333391!3d-33.7475604!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x6b129bb4233a84ab%3A0x14161442202c0426!2sThe%20Good%20Shepherd%20Parish%20Plumpton!5e0!3m2!1sen!2sau!4v1707613982564!5m2!1sen!2sau" height="300" style="border:0;width: 100%;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>

        <fieldset>
            <legend>Will you join us at our Nuptials?</legend>
            <div class="flex flex-row">
                <div class="flex flex-grow align-center flex-col">
                    <label for="nuptialsResponseYes">Yes, I'll be there!</label>
                    <input type="radio" id="nuptialsResponseYes" name="nuptialsResponse" required value="yes" />
                </div>
                <div class="flex flex-grow align-center flex-col">
                    <label for="nuptialsResponseNo">No</label>
                    <input type="radio" id="nuptialsResponseNo" name="nuptialsResponse" required value="no" />
                </div>
            </div>
        </fieldset>

        {{#if plus1Enabled}}
        <p class="question">Feel free to bring along a +1</p>
        {{/if}}

        <h2 class="decorated"><span>Reception</span></h2>
        <!-- <p class="question">Will you be able to make our special day?</p> -->

        <p class="question">Montage: 38 Frazer St, Lilyfield</p>
        <div style="width: 100%;">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3312.749171860629!2d151.14994657724114!3d-33.870354573226095!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x6b12affcac9a22d3%3A0x387e7c836ddd2ff!2sMontage%20Sydney!5e0!3m2!1sen!2sau!4v1707614003625!5m2!1sen!2sau" height="300" style="border:0;width: 100%;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>

        <fieldset>
            <legend>Will you join us at our Reception?</legend>
            <div class="flex flex-row">
                <div class="flex flex-grow align-center flex-col">
                    <label for="receptionResponseYes">Yes, I'll be there!</label>
                    <input type="radio" id="receptionResponseYes" name="receptionResponse" required value="yes" />
                </div>
                <div class="flex flex-grow align-center flex-col">
                    <label for="receptionResponseNo">No</label>
                    <input type="radio" id="receptionResponseNo" name="receptionResponse" required value="no" />
                </div>
            </div>
        </fieldset>

        {{#if plus1Enabled}}

        <p class="question" >Will you bring along someone to celebrate?</p>
        <p>
            <label>
                <input type="radio" name="plus1" required value="yes" />
                Yes
            </label>
        </p>
        <p>
            <label>
                <input type="radio" name="plus1" required value="no" />
                No
            </label>
        </p>

        <p id="plus1Element" class="plus1Element fade-in">
            <label>
                Your +1's Name?
                <input type="text" id="plus1Name" name="plus1Name" required value="" />
            </label>
        </p>

        {{/if}}

        <p>
            <h4>Dietary Requirements</h4>
            <label>
                <input type="checkbox" name="dietaryRequirementsVegetarian" />
                Vegetarian
            </label>
            <label>
                <input type="checkbox" name="dietaryRequirementsVegan" />
                Vegan
            </label>
            <textarea id="dietaryRequirements" name="dietaryRequirements" value="" placeholder="Other"></textarea>
        </p>

        <p>
            <label>
                What song would get you on the dance floor?
                <textarea id="extraSong" name="extraSong" placeholder="Usher, Fred again.. or the Weeknd?"></textarea>
            </label>
        </p>

        <button type="submit">RSVP</button>
    </form>



    <script>
        const plus1Name = document.getElementById("plus1Name");
        const radios = document.querySelectorAll('input[name="plus1"]');
        const plus1p = document.getElementById("plus1Element");

        const invitee = location.pathname;
        console.log(invitee)
        
        function bringingPlus1(isBringing) {
            if (isBringing) {
                plus1Name.setAttribute("required", "true");
                plus1p.classList.add("show");
            }
            else {
                plus1Name.removeAttribute("required");
                plus1Name.value = "";
                plus1p.classList.remove("show");
            }
        }
        
        for (match in radios) {
            radios[match].onchange = function () {
                if (this.value === "yes") {
                    bringingPlus1(true);
                }
                else if (this.value === "no") {
                    bringingPlus1(false);
                }
                else {
                    console.error("Unknown value!");
                }
            }

            if (radios[match].checked && radios[match].value === "yes") {
                bringingPlus1(true);
            }
            else if (radios[match].checked && radios[match].value === "no") {
                bringingPlus1(false);
            }
        }
    </script>
</body>

</html>